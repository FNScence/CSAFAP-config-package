// Rapid fire and better follow recoil config
// ⚠️ Launch option required:   -testscript "../../csgo/cfg/CSAFAP/addons/.vtest"
//    This is also required:    bind "mouse1" "+M1"

snd_toolvolume 0.05
alias +M1 "alias M1! tick_master; init_loops; alias M1> -attack; +M1_logic"
alias -M1 "alias M1! ""; cl_crosshair_recoil 0; alias M1>; -attack; spec_next"

// Follow-Recoil Logic (8-Step Delay + Counter)
alias d_1 "alias run_recoil d_2"
alias d_2 "alias run_recoil d_3"
alias d_3 "alias run_recoil d_4"
alias d_4 "alias run_recoil d_5"
alias d_5 "alias run_recoil d_6"
alias d_6 "alias run_recoil d_7"
alias d_7 "alias run_recoil d_8"
alias d_8 "counter_step; alias run_recoil d_1" 

alias rc_01 "alias counter_step rc_02"
alias rc_02 "alias counter_step rc_03"
alias rc_03 "alias counter_step rc_04"
alias rc_04 "alias counter_step rc_05"
alias rc_05 "alias counter_step rc_06"
alias rc_06 "alias counter_step rc_07"
alias rc_07 "alias counter_step rc_08"
alias rc_08 "cl_crosshair_recoil 1; alias counter_step rc_09" 
alias rc_09 "alias counter_step rc_10"
alias rc_10 "alias counter_step rc_11"
alias rc_11 "alias counter_step rc_12"
alias rc_12 "alias counter_step rc_13"
alias rc_13 "alias counter_step rc_14"
alias rc_14 "alias counter_step rc_15"
alias rc_15 "alias counter_step rc_16"
alias rc_16 "alias counter_step rc_17"
alias rc_17 "alias counter_step rc_18"
alias rc_18 "alias counter_step rc_19"
alias rc_19 "alias counter_step rc_20"
alias rc_20 "alias counter_step rc_21"
alias rc_21 "alias counter_step rc_22"
alias rc_22 "alias counter_step rc_23"
alias rc_23 "alias counter_step rc_24"
alias rc_24 "alias counter_step rc_25"
alias rc_25 "alias counter_step rc_26"
alias rc_26 "alias counter_step rc_27"
alias rc_27 "alias counter_step rc_28"
alias rc_28 "alias counter_step rc_29"
alias rc_29 "alias counter_step rc_30"
alias rc_30 ""

// Rapid Fire Logic (18-Step Loop)
alias rf_01 "+attack; alias run_fire rf_02"
alias rf_02 "-attack; alias run_fire rf_03"
alias rf_03 "alias run_fire rf_04"
alias rf_04 "alias run_fire rf_05"
alias rf_05 "alias run_fire rf_06"
alias rf_06 "alias run_fire rf_07"
alias rf_07 "alias run_fire rf_08"
alias rf_08 "alias run_fire rf_09"
alias rf_09 "alias run_fire rf_10"
alias rf_10 "alias run_fire rf_11"
alias rf_11 "alias run_fire rf_12"
alias rf_12 "alias run_fire rf_13"
alias rf_13 "alias run_fire rf_14"
alias rf_14 "alias run_fire rf_15"
alias rf_15 "alias run_fire rf_16"
alias rf_16 "alias run_fire rf_17"
alias rf_17 "alias run_fire rf_18"
alias rf_18 "alias run_fire rf_01" 


// ON States
// Option A: Rapid Fire ONLY (No Recoil Logic)
alias state_rapid_only "alias tick_master run_fire; alias +M1_logic ""; alias init_loops alias run_fire rf_01; play buttons/blip2; alias toggle_rapid rapid_mode_off; echo [STATE: RAPID_FIRE_ONLY]"

// Option B: ALL ON (Rapid Fire + Recoil Logic)
alias state_all_on "alias tick_master tick_on; alias +M1_logic ""; alias init_loops reset_on; play buttons/blip2; alias toggle_rapid rapid_mode_off; echo [STATE: ALL_FEATURES_ON]"

alias tick_on "run_recoil; run_fire"
alias reset_on "alias run_recoil d_1; alias counter_step rc_01; alias run_fire rf_01"

// OFF State
alias rapid_mode_off "alias tick_master ""; alias +M1_logic +attack; alias init_loops ""; play buttons/blip1; alias toggle_rapid current_on_mode; echo [STATE: OFF]"

// Changes what the toggle does
// Setup 1: Toggle switches between Rapid-Only and Off
alias rapid_setup_1 "alias current_on_mode state_rapid_only; current_on_mode; echo [SETUP_1_SELECTED: Toggle_controls_Rapid_Only]"

// Setup 2: Toggle switches between All-Features and Off
alias rapid_setup_2 "alias current_on_mode state_all_on; current_on_mode; echo [SETUP_2_SELECTED: Toggle_controls_Rapid_and_Recoil];exec CSAFAP/movement/"

// Default states
alias current_on_mode state_rapid_only; alias tick_master run_fire; alias +M1_logic ""; alias init_loops alias run_fire rf_01; alias toggle_rapid rapid_mode_off
alias tick_master ""; alias +M1_logic +attack; alias init_loops ""; alias toggle_rapid current_on_mode
exec csafap/movement/follow_off

// Binds (already set in CSAFAP/main.cfg)
//bind "CAPSLOCK" "toggle_rapid"
//bind "mouse1" "+M1"


//rapid_setup_2