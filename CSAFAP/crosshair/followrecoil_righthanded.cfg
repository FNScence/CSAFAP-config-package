// ===================================================================================
// PART 1: RECOIL LOGIC ONLY (No Rapid Fire)
// ⚠️ Launch option required:   -testscript "../../csgo/cfg/CSAFAP/addons/.vtest"
//    This is also required:    bind "mouse1" "+M1"
// ===================================================================================

fps_max 450

// Follow recoil indicator
alias crosshair_follow "cl_crosshairsize 0.8; cl_crosshairthickness 1; cl_crosshairgap -5; cl_crosshaircolor 1;cl_crosshair_drawoutline false;cl_crosshairalpha 255;cl_crosshairstyle 4;cl_crosshairusealpha true"
alias +M1 "alias M1! tick_master; init_loops; alias M1> -attack; +M1_logic"

// UPDATED RELEASE: Triggers '-M1_logic' (Variable)
alias -M1 "alias M1! ""; -M1_logic; alias M1>; -attack; spec_next"

cl_scoreboard_mouse_enable_binding +M2

// --- Follow-Recoil Logic (2-Step Delay) ---
alias d_1 "alias run_recoil d_2"
alias d_2 "counter_step; alias run_recoil d_1" 

// Warmup Phase (Steps 1-7)
alias rc_01 "alias counter_step rc_02"
alias rc_02 "alias counter_step rc_03"
alias rc_03 "alias counter_step rc_04"
alias rc_04 "alias counter_step rc_05"
alias rc_05 "alias counter_step rc_06"
alias rc_06 "alias counter_step rc_07"
alias rc_07 "alias counter_step rc_loop_on" 

// Infinite Flicker Loop (Recoil ON)
alias rc_loop_on  "cl_crosshair_recoil 1; crosshair_follow; alias counter_step rc_loop_off"
alias rc_loop_off "cl_crosshair_recoil 0; reset_crosshair;  alias counter_step rc_loop_on"


// ===================================================================================
// PART 2: DYNAMIC LOGIC & TOGGLES
// ===================================================================================

// 1. Logic Helpers
alias reset_recoil_only "alias run_recoil d_1; alias counter_step rc_01"

// 2. Release Helpers
// release_full: Resets Recoil AND Crosshair Style (For when Recoil Mode is ON)
alias release_full   "cl_crosshair_recoil 0; reset_crosshair"
// release_simple: Resets Recoil ONLY (For when Recoil Mode is OFF)
alias release_simple "cl_crosshair_recoil 0"

// 3. Logic Definitions

// Logic: OFF (Standard Mouse)
alias logic_off "alias tick_master ""; alias +M1_logic +attack; alias -M1_logic release_simple; alias init_loops """

// Logic: Recoil Mode (Continuous Fire + Recoil Crosshair)
// Applied ONLY to Slot 1 now
alias logic_recoil "alias tick_master run_recoil; alias +M1_logic +attack; alias -M1_logic release_full; alias init_loops reset_recoil_only"


// 4. The Toggle Actions

// ACTION: Turn OFF
alias rapid_mode_off "logic_off; load_slots_disabled; alias toggle_rapid current_setup_activator; echo [OFF]"

// ACTION: Turn ON (Selector)
alias current_setup_activator "load_slots_enabled; last_slot_used; alias toggle_rapid rapid_mode_off; echo [ON:  FOLLOW RECOIL]"

// ===================================================================================
// PART 4: WEAPON SWITCH & HAND LOGIC (With Memory)
// ===================================================================================

// A. ENABLED SLOTS
// Slot 1 (Rifle)  -> Recoil Logic
// Slot 2 (Pistol) -> OFF
// Slot 3-10       -> OFF
alias load_slots_enabled "alias ef_slot1 s_on_slot1; alias ef_slot2 s_on_slot2; alias ef_slot3 s_off_slot3; alias ef_slot4 s_off_slot4; alias ef_slot5 s_off_slot5; alias ef_slot6 s_off_slot6; alias ef_slot7 s_off_slot7; alias ef_slot8 s_off_slot8; alias ef_slot9 s_off_slot9; alias ef_slot10 s_off_slot10"

alias s_on_slot1  "slot1; set_slot1; switchhandsright;  logic_recoil"
alias s_on_slot2  "slot2; set_slot2; switchhandsright;  logic_off"

// B. DISABLED SLOTS (Always OFF)
alias load_slots_disabled "alias ef_slot1 s_off_slot1; alias ef_slot2 s_off_slot2; alias ef_slot3 s_off_slot3; alias ef_slot4 s_off_slot4; alias ef_slot5 s_off_slot5; alias ef_slot6 s_off_slot6; alias ef_slot7 s_off_slot7; alias ef_slot8 s_off_slot8; alias ef_slot9 s_off_slot9; alias ef_slot10 s_off_slot10"

// Standard definitions for disabled slots
alias s_off_slot1  "slot1; set_slot1; switchhandsright;  logic_off"
alias s_off_slot2  "slot2; set_slot2; switchhandsright;  logic_off"
alias s_off_slot3  "slot3; set_slot3; switchhandsleft; logic_off"
alias s_off_slot4  "slot4; set_slot4; switchhandsright;  logic_off"
alias s_off_slot5  "slot5; set_slot5; switchhandsright;  logic_off"
alias s_off_slot6  "slot6; set_slot6; switchhandsright;  logic_off"
alias s_off_slot7  "slot7; set_slot7; switchhandsright;  logic_off"
alias s_off_slot8  "slot8; set_slot8; switchhandsright;  logic_off"
alias s_off_slot9  "slot9; set_slot9; switchhandsright;  logic_off"
alias s_off_slot10 "slot10; set_slot10; switchhandsright; logic_off"

// Quickswitch Logic
alias qs_slot1    "alias ef_invnext ef_slot2; alias ef_invprev ef_slot10; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot1; alias last_slot_used ef_slot1; alias set_slot1 ; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot2    "alias ef_invnext ef_slot3; alias ef_invprev ef_slot1; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot2; alias last_slot_used ef_slot2; alias set_slot1 qs_slot1; alias set_slot2 ; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot3    "alias ef_invnext ef_slot5; alias ef_invprev ef_slot2; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot3; alias last_slot_used ef_slot3; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 ; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot5    "alias ef_invnext ef_slot6; alias ef_invprev ef_slot3; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot5; alias last_slot_used ef_slot5; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 ; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot6    "alias ef_invnext ef_slot7; alias ef_invprev ef_slot5; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot6; alias last_slot_used ef_slot6; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 ; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot7    "alias ef_invnext ef_slot8; alias ef_invprev ef_slot6; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot7; alias last_slot_used ef_slot7; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 ; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"  
alias qs_slot8    "alias ef_invnext ef_slot9; alias ef_invprev ef_slot7; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot8; alias last_slot_used ef_slot8; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 ; alias set_slot9 qs_slot9; alias set_slot10 qs_slot10"
alias qs_slot9    "alias ef_invnext ef_slot10; alias ef_invprev ef_slot8; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot9; alias last_slot_used ef_slot9; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 ; alias set_slot10 qs_slot10"
alias qs_slot10   "alias ef_invnext ef_slot1; alias ef_invprev ef_slot9; set_lastinv; alias set_lastinv alias ef_lastinv ef_slot10; alias last_slot_used ef_slot10; alias set_slot1 qs_slot1; alias set_slot2 qs_slot2; alias set_slot3 qs_slot3; alias set_slot5 qs_slot5; alias set_slot6 qs_slot6; alias set_slot7 qs_slot7; alias set_slot8 qs_slot8; alias set_slot9 qs_slot9; alias set_slot10"

// Initialization
current_setup_activator         // Activate it (Sets toggle to OFF for next press, loads slots)
qs_slot3
ef_slot1           				// Switch to Slot 1 -> Memory set to Slot 1
